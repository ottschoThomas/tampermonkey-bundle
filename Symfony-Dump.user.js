// ==UserScript==
// @name         Symfony Dump
// @namespace    ott
// @version      1
// @description  Symfony Dump
// @author       Thomas Lesinski
// @include      *://*/*
// @include      localhost
// @grant        none
// @icon         https://www.google.com/s2/favicons?domain=ottscho-it-service.de
// @noframes
// @downloadURL  https://github.com/ottschoThomas/tampermonkey-bundle/raw/main/Symfony-Dump.user.js
// @updateURL    https://github.com/ottschoThomas/tampermonkey-bundle/raw/main/Symfony-Dump.user.js
// ==/UserScript==
!function(){"use strict";(new class{init(){void 0!==window.PluginManager&&void 0!==window.Sfdump&&(this.createStyle(),this.createModal(),this.registerInterval())}createStyle(){document.body.insertAdjacentHTML("beforeend","<style>\n                    .ott-symfony-dump-modal {\n                        background: #18171b;\n                        bottom: 0;\n                        left: 0;\n                        overflow-y: scroll;\n                        position: fixed;\n                        right: 0;\n                        top: 0;\n                        z-index: 2147483647;\n                    }\n                    \n                    .ott-symfony-dump-modal .sf-dump {\n                        margin: 0;\n                    }\n                    \n                    .ott-symfony-dump-modal .sf-dump-search-wrapper {\n                        padding-left: 75%;\n                        padding-right: 4rem;\n                    }\n                    \n                    .ott-symfony-dump-modal-content {\n                        position: relative;\n                    }\n                    \n                    .ott-symfony-dump-modal-close {\n                        cursor: pointer;\n                        font-size: 30px;\n                        position: fixed;\n                        right: 22px;\n                        top: 0;\n                        z-index: 2147483647;\n                    }\n                    \n                    .ott-symfony-dump-trigger {\n                        height: 30px;\n                        line-height: 20px;\n                    }\n                </style>")}createModal(){this.modal=document.createElement("div"),this.hideModal(),this.modal.classList.add("ott-symfony-dump-modal"),this.modalContentWrapper=document.createElement("div"),this.modalContentWrapper.classList.add("ott-symfony-dump-modal-content"),this.modal.appendChild(this.modalContentWrapper),this.modalCloseButton=document.createElement("div"),this.modalCloseButton.classList.add("ott-symfony-dump-modal-close"),this.modalCloseButton.innerHTML="❌",this.modalCloseButton.addEventListener("click",this.hideModal.bind(this)),this.modal.appendChild(this.modalCloseButton),document.body.appendChild(this.modal)}registerInterval(){this.addTriggerInterval=setInterval(this.handleDumps.bind(this),250)}handleDumps(){document.querySelectorAll(".sf-dump:not(.js-ott-processed)").forEach((t=>{t.classList.add("js-ott-processed"),t.querySelectorAll(".sf-dump-note").forEach((t=>{const e=t.parentElement;"a"===e.tagName.toLowerCase()&&e.setAttribute("target","_blank")}));const e=document.createElement("button");e.setAttribute("type","button"),e.classList.add("btn","btn-primary","ott-symfony-dump-trigger"),e.innerHTML="Open",e.addEventListener("click",this.onTriggerClick.bind(this)),t.before(e)}))}onTriggerClick(t){const e=t.currentTarget.nextElementSibling.cloneNode(!0);e.id="ott-symfony-dump",e.querySelectorAll("span").forEach((t=>{"▼"!==t.innerHTML&&"▶"!==t.innerHTML||t.remove()})),this.modalContentWrapper.innerHTML="",this.modalContentWrapper.appendChild(e),window.Sfdump("ott-symfony-dump"),this.showModal()}showModal(){document.body.classList.add("overflow-hidden"),this.modal.style.display="block"}hideModal(){document.body.classList.remove("overflow-hidden"),this.modal.style.display="none"}}).init()}();
